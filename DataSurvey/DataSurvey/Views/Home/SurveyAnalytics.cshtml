
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    ViewBag.Title = "Survey Analytics";
}

<h2>Survey Analytics for "@ViewBag.SurveyName" </h2>


@foreach (var item in ViewBag.SurveyData)
{
    <h3>@item.Key</h3>
}

<div>
    <canvas id="myChart" width="200" height="100"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
    const ctx = document.getElementById('myChart');

    var responsename=[];
    var responsecount=[];
    @foreach (var item in ViewBag.SurveyData)
    {
        @:responsename.push("@item.Key");
        @:responsecount.push(@item.Value);
    }

    new Chart(ctx, {
        type: 'bar',
        data: {
            labels: responsename,
            datasets: [{
                label: 'Survey Responses',
                data: responsecount,
                backgroundColor: 'rgba(54, 162, 235, 0.2)',
                borderColor: 'rgba(54, 162, 235, 1)',
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    }

    )
</script>